<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Figuras en WebAR</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        font-family: Arial, sans-serif;
      }
      #hud {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 2;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        border-radius: 10px;
        font-size: 1rem;
      }
      select, button {
        font-size: 1.1rem;
        margin-bottom: 10px;
      }
      #info {
        position: absolute;
        z-index: 1;
        bottom: 5%;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 1rem;
        text-align: center;
        display: none;
      }
      #closeInfo {
        margin-top: 8px;
        background-color: #ff4444;
        color: white;
        border: none;
        padding: 4px 10px;
        border-radius: 8px;
        cursor: pointer;
      }
      model-viewer {
        width: 100vw;
        height: 100vh;
        touch-action: pan-y;
      }
    </style>
  </head>
  <body>
    <div id="hud">
      <label for="figura">üìå Selecciona una figura:</label><br />
      <select id="figura">
        <option value="Cubo"> Cubo</option>

        <option value="Esfera"> Esfera</option>
        <option value="Cono">üî∫ Cono</option>
        <option value="Cilindro"> Cilindro</option>
      
        <option value="Prisma_Hexagonal"> Prisma Hexagonal</option>
        <option value="Toroide"> Toroide</option>
        <option value="Pir√°mide"> Pir√°mide</option>
      </select>
      <button id="resetBtn">üîÑ Reiniciar</button>
    </div>

    <div id="info">
      <div id="infoContent"></div>
      <button id="closeInfo">Cerrar</button>
    </div>

    <model-viewer
      id="visor"
      ar
      ar-modes="webxr"
      ar-scale="fixed"
      camera-controls
      autoplay
      auto-rotate
      shadow-intensity="1"
      exposure="1.1"
      placement="floor"
      alt="Figura 3D"
      interaction-prompt="none"
      xr-environment
    ></model-viewer>

    <audio id="sonido" src="ding.mp3" preload="auto"></audio>

    <script>
      const visor = document.getElementById("visor");
      const figuraSelect = document.getElementById("figura");
      const info = document.getElementById("info");
      const infoContent = document.getElementById("infoContent");
      const sonido = document.getElementById("sonido");
      const closeBtn = document.getElementById("closeInfo");
      const resetBtn = document.getElementById("resetBtn");

      const datos = {
        Cubo: {
          nombre: "Cubo",
          vertices: 8,
          aristas: 12,
          caras: 6,
          area: "6 unidades¬≤",
          volumen: "1 unidad¬≥",
          modelo: "Cubo.glb",
        },
        Texto_Cubo: {
          nombre: "Cubo + Texto",
          vertices: 8,
          aristas: 12,
          caras: 6,
          area: "6 unidades¬≤",
          volumen: "1 unidad¬≥",
          modelo: "Texto_Cubo.glb",
        },
        Esfera: {
          nombre: "Esfera",
          vertices: 482,
          aristas: 960,
          caras: 960,
          area: "4œÄr¬≤",
          volumen: "4/3œÄr¬≥",
          modelo: "Esfera.glb",
        },
        Cono: {
          nombre: "Cono",
          vertices: 49,
          aristas: 96,
          caras: 96,
          area: "œÄr(r + g)",
          volumen: "1/3œÄr¬≤h",
          modelo: "Cono.glb",
        },
        Cilindro: {
          nombre: "Cilindro",
          vertices: 98,
          aristas: 192,
          caras: 192,
          area: "2œÄr(r + h)",
          volumen: "œÄr¬≤h",
          modelo: "Cilindro.glb",
        },
        Prisma_Hexagonal: {
          nombre: "Prisma Hexagonal",
          vertices: 12,
          aristas: 18,
          caras: 8,
          area: "6ab + 6bh",
          volumen: "3abh",
          modelo: "Prisma Hexagonal.glb",
        },
        Toroide: {
          nombre: "Toroide",
          vertices: 512,
          aristas: 1024,
          caras: 1024,
          area: "4œÄ¬≤Rr",
          volumen: "2œÄ¬≤Rr¬≤",
          modelo: "Toroide.glb",
        },
        Pir√°mide: {
          nombre: "Pir√°mide",
          vertices: 5,
          aristas: 8,
          caras: 5,
          area: "Base + caras laterales",
          volumen: "1/3 base ¬∑ altura",
          modelo: "Pir√°mide.glb",
        },
      };

      function actualizarFigura(nombre) {
        const fig = datos[nombre];
        visor.src = fig.modelo;
        visor.removeAttribute('reveal');
        visor.setAttribute('reveal', 'auto');
        sonido.play();
        infoContent.innerHTML = `
          <strong>üìå ${fig.nombre}</strong><br>
          V√©rtices: ${fig.vertices} | Aristas: ${fig.aristas}<br>
          Caras: ${fig.caras}<br>
          √Årea: ${fig.area} | Volumen: ${fig.volumen}
        `;
        info.style.display = "none";
      }</strong><br>
          V√©rtices: ${fig.vertices} | Aristas: ${fig.aristas}<br>
          Caras: ${fig.caras}<br>
          √Årea: ${fig.area} | Volumen: ${fig.volumen}
        `;
        info.style.display = "none";
      }

      closeBtn.addEventListener("click", () => {
        info.style.display = "none";
      });

      figuraSelect.addEventListener("change", () => {
        actualizarFigura(figuraSelect.value);
      });

      visor.addEventListener("scene-graph-ready", () => {
        visor.addEventListener("click", () => {
          info.style.display = info.style.display === "none" ? "block" : "none";
        });
      });

      window.addEventListener("DOMContentLoaded", () => {
        actualizarFigura("Cubo");
        setTimeout(() => visor.activateAR?.(), 2000);
      });

      resetBtn.addEventListener("click", () => {
        figuraSelect.value = "Cubo";
        actualizarFigura("Cubo");
      });
    </script>
  </body>
</html>
